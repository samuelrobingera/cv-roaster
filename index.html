<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roast My CV Bot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
            transform: translateY(-2px);
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            color: #a0aec0;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #4a5568;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .upload-subtext {
            color: #a0aec0;
            font-size: 0.9rem;
        }

        #fileInput {
            display: none;
        }

        .content-type-selection {
            margin-bottom: 30px;
        }

        .content-type-selection h3 {
            color: #2d3748;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }

        .type-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .type-btn {
            padding: 12px 24px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .type-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .type-btn.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .linkedin-input {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .linkedin-input .input-group {
            margin-bottom: 0;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            color: #4a5568;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .help-text {
            font-size: 0.9rem;
            color: #718096;
            margin-top: 5px;
        }

        .roast-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .roast-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .roast-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            color: #667eea;
            margin-bottom: 20px;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result {
            display: none;
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid #667eea;
        }

        .result h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .result-content {
            color: #4a5568;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .error {
            background: #fed7d7;
            border-left-color: #e53e3e;
        }

        .features-info {
            background: #e6fffa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #38b2ac;
        }

        .features-info h4 {
            color: #234e52;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .features-info p {
            color: #2c7a7b;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        @media (max-width: 640px) {
            .container {
                padding: 25px;
                margin: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .type-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .type-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔥 Roast My Profile</h1>
            <p>Get brutally honest feedback on your CV or LinkedIn profile</p>
        </div>

        <div class="features-info">
            <h4>✨ Why Use This?</h4>
            <p>AI-powered feedback • Brutally honest • Actionable advice for CVs & LinkedIn • Completely free</p>
        </div>

        <!-- Content Type Selection -->
        <div class="content-type-selection">
            <h3>What would you like to roast?</h3>
            <div class="type-buttons">
                <button class="type-btn active" data-type="cv">📄 CV/Resume</button>
                <button class="type-btn" data-type="linkedin">💼 LinkedIn Profile</button>
            </div>
        </div>

        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">📄</div>
            <div class="upload-text" id="uploadText">Drop your CV here or click to upload</div>
            <div class="upload-subtext" id="uploadSubtext">Supports PDF, DOCX, TXT files</div>
            <input type="file" id="fileInput" accept=".pdf,.docx,.txt" />
        </div>

        <!-- LinkedIn URL Input (hidden by default) -->
        <div class="linkedin-input" id="linkedinInput" style="display: none;">
            <div class="input-group">
                <label for="linkedinUrl">LinkedIn Profile URL</label>
                <input type="url" id="linkedinUrl" placeholder="https://linkedin.com/in/your-profile" />
                <div class="help-text">Paste your LinkedIn profile URL (make sure it's public)</div>
            </div>
        </div>

        <button class="roast-btn" id="roastBtn" disabled>
            🔥 <span id="roastBtnText">Roast My CV</span>
        </button>

        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <span id="loadingText">Analyzing with AI...</span>
        </div>

        <div class="result" id="result">
            <h3 id="resultTitle">🎯 The Roast</h3>
            <div class="result-content" id="resultContent"></div>
        </div>
    </div>

    <script>
        class CVRoastBot {
            constructor() {
                this.initializeElements();
                this.selectedFile = null;
                this.extractedText = '';
                this.currentType = 'cv';
                this.initializeEventListeners();
            }

            initializeElements() {
                this.uploadArea = document.getElementById('uploadArea');
                this.fileInput = document.getElementById('fileInput');
                this.roastBtn = document.getElementById('roastBtn');
                this.roastBtnText = document.getElementById('roastBtnText');
                this.loading = document.getElementById('loading');
                this.result = document.getElementById('result');
                this.resultContent = document.getElementById('resultContent');
                this.resultTitle = document.getElementById('resultTitle');
                this.typeButtons = document.querySelectorAll('.type-btn');
                this.linkedinInput = document.getElementById('linkedinInput');
                this.linkedinUrl = document.getElementById('linkedinUrl');
                this.uploadText = document.getElementById('uploadText');
                this.uploadSubtext = document.getElementById('uploadSubtext');
            }

            initializeEventListeners() {
                // Content type selection
                this.typeButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => this.handleTypeChange(e));
                });
                
                // File upload events
                this.uploadArea.addEventListener('click', () => {
                    if (this.currentType === 'cv') {
                        this.fileInput.click();
                    }
                });
                
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                
                // Drag and drop events
                this.uploadArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                this.uploadArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                this.uploadArea.addEventListener('drop', (e) => this.handleDrop(e));
                
                // LinkedIn URL input
                this.linkedinUrl.addEventListener('input', () => this.validateForm());
                
                // Roast button
                this.roastBtn.addEventListener('click', () => this.roastContent());
            }

            handleTypeChange(e) {
                console.log('Type change clicked:', e.target.dataset.type);
                
                // Remove active class from all buttons
                this.typeButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                e.target.classList.add('active');
                
                // Update current type
                this.currentType = e.target.dataset.type;
                
                // Show/hide appropriate input methods
                if (this.currentType === 'cv') {
                    this.uploadArea.style.display = 'block';
                    this.linkedinInput.style.display = 'none';
                    this.roastBtnText.textContent = 'Roast My CV';
                    this.resetUploadArea();
                } else if (this.currentType === 'linkedin') {
                    this.uploadArea.style.display = 'none';
                    this.linkedinInput.style.display = 'block';
                    this.roastBtnText.textContent = 'Roast My LinkedIn';
                }
                
                // Reset form state
                this.selectedFile = null;
                this.extractedText = '';
                this.linkedinUrl.value = '';
                this.result.style.display = 'none';
                this.validateForm();
            }

            resetUploadArea() {
                this.uploadArea.innerHTML = `
                    <div class="upload-icon">📄</div>
                    <div class="upload-text" id="uploadText">Drop your CV here or click to upload</div>
                    <div class="upload-subtext" id="uploadSubtext">Supports PDF, DOCX, TXT files</div>
                    <input type="file" id="fileInput" accept=".pdf,.docx,.txt" />
                `;
                
                // Re-initialize file input reference and event listener
                this.fileInput = document.getElementById('fileInput');
                this.uploadText = document.getElementById('uploadText');
                this.uploadSubtext = document.getElementById('uploadSubtext');
                
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
            }

            handleDragOver(e) {
                e.preventDefault();
                if (this.currentType === 'cv') {
                    this.uploadArea.classList.add('dragover');
                }
            }

            handleDragLeave(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
            }

            handleDrop(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
                
                if (this.currentType === 'cv') {
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        this.handleFile(files[0]);
                    }
                }
            }

            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.handleFile(file);
                }
            }

            async handleFile(file) {
                console.log('File selected:', file.name, file.type);
                
                // Validate file type
                const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain'];
                const allowedExtensions = ['.pdf', '.docx', '.txt'];
                
                const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
                
                if (!allowedTypes.includes(file.type) && !allowedExtensions.includes(fileExtension)) {
                    this.showError('Please upload a PDF, DOCX, or TXT file.');
                    return;
                }
                
                this.selectedFile = file;
                
                // Update upload area to show success
                this.uploadArea.innerHTML = `
                    <div class="upload-icon">✅</div>
                    <div class="upload-text">${file.name}</div>
                    <div class="upload-subtext">File ready for roasting! (${Math.round(file.size/1024)}KB)</div>
                `;
                
                // Extract text based on file type
                try {
                    if (file.type === 'application/pdf' || fileExtension === '.pdf') {
                        this.extractedText = await this.extractPDFText(file);
                    } else if (file.type.includes('text') || fileExtension === '.txt') {
                        this.extractedText = await this.extractTextFile(file);
                    } else if (file.type.includes('wordprocessingml') || fileExtension === '.docx') {
                        this.extractedText = await this.extractDocxText(file);
                    } else {
                        this.extractedText = `File: ${file.name} (${Math.round(file.size/1024)}KB) uploaded successfully.`;
                    }
                    
                    console.log('Text extracted, length:', this.extractedText.length);
                    this.validateForm();
                } catch (error) {
                    console.error('Text extraction error:', error);
                    this.showError('Failed to extract text from file. The file might be corrupted or in an unsupported format.');
                }
            }

            async extractPDFText(file) {
                // For demo purposes, return mock text
                // In a real implementation, you'd use a PDF parsing library
                return `Sample CV content extracted from ${file.name}:\n\nJohn Doe\nSoftware Engineer\n\nExperience:\n- 5 years in React and Node.js\n- Led multiple projects\n- Worked with various technologies\n\nEducation:\n- Computer Science Degree\n- Various certifications\n\nSkills:\n- JavaScript, Python, React\n- Team collaboration\n- Problem solving`;
            }

            async extractTextFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const text = e.target.result;
                        if (text && text.trim().length > 0) {
                            resolve(text);
                        } else {
                            resolve(`Text file ${file.name} appears to be empty or contains only whitespace.`);
                        }
                    };
                    reader.onerror = (e) => reject(new Error('Failed to read text file'));
                    reader.readAsText(file);
                });
            }

            async extractDocxText(file) {
                // For demo purposes, return mock text
                // In a real implementation, you'd use a library like mammoth.js
                return `Sample CV content extracted from ${file.name}:\n\nJane Smith\nMarketing Manager\n\nProfessional Summary:\nExperienced marketing professional with proven track record\n\nWork Experience:\n- Marketing Manager at ABC Corp (2020-2024)\n- Marketing Specialist at XYZ Inc (2018-2020)\n\nEducation:\n- MBA in Marketing\n- Bachelor's in Business Administration\n\nCore Competencies:\n- Digital marketing\n- Brand management\n- Data analysis`;
            }

            validateForm() {
                let isValid = false;
                
                if (this.currentType === 'cv') {
                    isValid = this.selectedFile !== null && this.extractedText.length > 0;
                } else if (this.currentType === 'linkedin') {
                    const url = this.linkedinUrl.value.trim();
                    isValid = url !== '' && url.includes('linkedin.com') && url.startsWith('http');
                }
                
                this.roastBtn.disabled = !isValid;
                console.log('Form validation:', { currentType: this.currentType, isValid, hasFile: !!this.selectedFile, hasText: this.extractedText.length > 0 });
            }

            async roastContent() {
                this.showLoading();
                
                try {
                    // Simulate API call delay
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    let roast;
                    if (this.currentType === 'cv') {
                        roast = this.getMockCVRoast();
                    } else {
                        roast = this.getMockLinkedInRoast();
                    }
                    
                    this.showResult(roast);
                } catch (error) {
                    this.showError(error.message);
                }
            }

            getMockCVRoast() {
                const roasts = [
                    `🔥 OH BOY, where do I even START with this masterpiece?

First off, I see you've mastered the art of buzzword bingo! "Synergistic solutions," "thought leadership," and "paradigm shifts" - did you copy-paste this from a corporate BS generator? 

Your experience section reads like: "Responsible for things. Did stuff. Very important stuff." Be specific! Instead of "managed projects," tell me you "led a 5-person team that increased user engagement by 40%."

And can we talk about that skills section? You listed "Microsoft Office" as a skill in 2024. That's like putting "can breathe oxygen" on your CV. 

BUT here's the good news - I can see potential buried under all this corporate speak. Your actual achievements are solid, they just need to see daylight!

💡 Quick fixes:
- Replace buzzwords with specific metrics
- Use action verbs (led, built, achieved)
- Quantify everything with numbers
- Remove outdated "skills" like basic software
- Add a personal project that shows passion

You're not hopeless, just corporate-washed! 😄`,

                    `🎯 Well well well, another "results-driven professional" has graced my inbox!

Listen friend, your CV is like a beige wallpaper - technically functional but puts everyone to sleep. Let's wake this thing up!

Your summary is 4 lines of nothing. "Experienced professional seeking opportunities" - WOW, groundbreaking! Every CV says this. Tell me what makes YOU different in 2 sentences max.

Work experience needs CPR:
- "Collaborated with teams" → "Led cross-functional team of 8 to launch product 2 weeks ahead of schedule"
- "Improved processes" → "Redesigned onboarding process, reducing new hire ramp-up time by 50%"

Your education section is longer than your achievements. Unless you're a recent grad, flip that ratio!

🚀 The Fix:
1. Lead with impact, not duties
2. Numbers are your best friend
3. Show progression in your career
4. Cut the fluff, add the stuff that matters
5. Make it scannable - recruiters spend 6 seconds on each CV

You've got the experience, now make it SHINE! ✨`
                ];
                
                return roasts[Math.floor(Math.random() * roasts.length)];
            }

            getMockLinkedInRoast() {
                const linkedInRoasts = [
                    `🔥 OH WOW, another "Passionate about leveraging synergies" headline!

Let me guess - your summary starts with "Results-driven professional" and ends with "seeking new opportunities"? Original!

Your experience section is a graveyard of corporate buzzwords:
• "Spearheaded initiatives" (what initiatives? be specific!)
• "Thought leadership in disruptive technologies" (this means nothing)
• "Cross-functional collaboration" (you talked to other people, congrats)

And can we discuss your skills endorsements? You've got "Leadership" with 5 endorsements from people who've never seen you lead anything.

🎯 The LinkedIn Reality Check:
- Your headline should say what you DO, not corporate fluff
- Use numbers in your experience ("increased sales by 40%" not "drove growth")
- Post actual content instead of reposting motivational quotes
- Your photo shouldn't look like a hostage situation

💡 Quick fixes:
- Write like a human, not a corporate robot
- Show real work examples
- Connect with people you actually know
- Stop saying you're "blessed" to announce job changes

Your profile has potential buried under corporate BS. Time to dig it out! 🚀`,

                    `🎯 Well hello there, "Innovative thought leader passionate about digital transformation"!

Your LinkedIn reads like it was written by a buzzword generator having an existential crisis.

Let's break down this masterpiece:
📸 Profile photo: Why do you look surprised to be there?
🏷️ Headline: "Experienced professional seeking opportunities" - along with 50 million others
📝 Summary: 3 paragraphs of nothing. "Passionate about excellence" tells me zilch

Your posts are even better:
- Reposted 47 "Monday Motivation" quotes this month
- Shared that story about the CEO who helps janitors (we've all seen it)
- "Agree? Thoughts?" on obvious statements

🔥 But here's what's really killing your profile:
• No personality - you sound like every other LinkedIn zombie
• No specific achievements - "managed projects" means nothing
• Connections with random MLM people you've never met
• Endorsing people for skills you've never seen them use

💡 The Fix:
1. Write your headline like you're introducing yourself at a party
2. Share YOUR actual work, not recycled inspiration porn
3. Comment with real insights, not just "Great post!"
4. Connect with humans, not LinkedIn bots

You're a real person with real skills. Let that show! ✨`
                ];
                
                return linkedInRoasts[Math.floor(Math.random() * linkedInRoasts.length)];
            }

            showLoading() {
                this.loading.style.display = 'block';
                this.result.style.display = 'none';
                this.roastBtn.disabled = true;
            }

            showResult(content) {
                this.loading.style.display = 'none';
                this.result.style.display = 'block';
                this.result.classList.remove('error');
                this.resultTitle.textContent = '🎯 The Roast';
                this.resultContent.textContent = content;
                this.roastBtn.disabled = false;
            }

            showError(message) {
                this.loading.style.display = 'none';
                this.result.style.display = 'block';
                this.result.classList.add('error');
                this.resultTitle.textContent = '❌ Error';
                this.resultContent.textContent = message;
                this.roastBtn.disabled = false;
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            new CVRoastBot();
        });
    </script>
</body>
</html>